# AI-Town 連續劇系統設計理念

## 📺 系統定位

本專案定位為 **AI 驅動的持續運行連續劇製作系統**,而非傳統互動遊戲。這是一個創新的嘗試,將 AI 技術應用於內容創作與敘事生成領域。

### 核心特性

- 🎬 **持續演出**: 世界 24/7 運行,劇情自然湧現
- 👀 **觀察者模式**: 玩家作為觀察者隨時進入,而非參與者
- 🔍 **探索式敘事**: 提供工具讓玩家自主探索過往劇情,而非被動接收摘要
- 🌱 **自然湧現**: AI 角色在合理框架內自主互動,不強制劇情發展
- 📹 **完整記錄**: 所有互動與事件均記錄於資料庫,可完整回放

## 🎭 設計哲學

### 劇情發展的兩難平衡

連續劇系統面臨一個核心設計挑戰:**計劃性劇情** vs **自然湧現**

#### 計劃性劇情的優勢
- 可以設計高潮與轉折
- 確保劇情的戲劇張力
- 避免長期平淡無奇

#### 自然湧現的價值
- **AI 不可預測性是特色,不是缺陷**
- 角色反應無法事先預知,反而增加劇情趣味性
- 符合「真實感」,避免過度腳本化
- 保持整體劇情的合理性與一致性

#### 平衡策略

**我們的立場**:
- ✅ 給予 AI 角色**個性框架**與**價值觀設定**,而非具體劇情指令
- ✅ 讓衝突與情節**自然產生**,而非強制觸發
- ✅ 提供**環境刺激**而非**劇情腳本** (例如:資源限制、特殊事件)
- ❌ 避免過度干預,保持 AI 的自主決策空間

**設計原則**:
```
合理框架 + AI 自主性 = 有趣且可信的劇情
```

## 🌐 持續運行模式

### 非傳統「劇集」結構

**傳統連續劇**: 分集播出,每集有開頭與結尾
**本系統**: 持續運行,無明確分界

### 關鍵設計決策

1. **世界永不停止**: 角色持續互動,不因無觀眾而暫停
2. **非劇集式敘事**: 沒有「第一集」「第二集」的概念
3. **時間流逝真實性**: 世界內時間與現實時間同步流逝
4. **事件累積效應**: 過往事件影響未來互動

### 技術實現考量

- **資源管理**: 長期運行的記憶體與 LLM 額度控制
- **資料歸檔**: 舊資料定期歸檔但保持可查詢性
- **狀態一致性**: 確保長時間運行不會出現邏輯矛盾

## 👁️ 觀察者模式設計

### 玩家角色定位

**玩家不是參與者,而是觀察者**

- 可以隨時「切換頻道」進入世界觀看
- 不直接影響劇情發展 (初期階段)
- 透過探索工具了解過往事件
- 發展對特定角色或劇情線的關注

### 與傳統遊戲的差異

| 特性 | 傳統遊戲 | 本系統 |
|------|----------|--------|
| 玩家角色 | 主動參與者 | 被動觀察者 |
| 世界運行 | 依玩家行為觸發 | 獨立持續運行 |
| 劇情推進 | 玩家選擇驅動 | AI 自主互動驅動 |
| 進度控制 | 玩家控制節奏 | 實時流逝 |
| 重玩性 | 可重置重玩 | 一次性時間線 |

### 後期可能演進

未來可考慮的互動層級:
- **觀察者介入**: 有限的環境操作權限
- **角色扮演模式**: 可短暫扮演某個角色
- **導演模式**: 可以影響世界環境參數

## 🔍 探索式敘事機制

### 核心理念

**不要「餵」資訊給玩家,讓玩家自己「挖掘」**

傳統方式 (❌ 避免):
- 玩家進入 → 系統自動顯示「劇情摘要」
- 彈出通知:「昨天 Alice 和 Bob 吵架了」
- 強制觀看重點片段

探索式方式 (✅ 採用):
- 提供時間軸工具,玩家自由探索
- 發現異常事件,主動深入調查
- 跟隨感興趣的角色,了解其故事線

### 建議的探索工具

#### 1. 關係時間軸檢視器
```typescript
interface RelationshipTimeline {
  characterA: string;
  characterB: string;
  relationshipScore: Array<{
    timestamp: number;
    score: number;  // -100 to +100
    triggerEvent?: string;  // 觸發變化的事件
  }>;
}
```

**功能**:
- 滑桿選擇時間點,查看兩個角色關係變化曲線
- 點擊關鍵轉折點,查看當時發生的對話或事件
- 自動標示重大關係變化 (例如:分數變化 >20)

#### 2. 對話考古系統
```typescript
interface DialogueArchive {
  participants: string[];
  timestamp: number;
  location: string;
  messages: Message[];
  tags: string[];  // 自動標籤:衝突/和解/告白/秘密等
  importance: number;  // LLM 自動評估的重要性 0-10
}
```

**功能**:
- 依角色、地點、標籤篩選對話
- 重要性排序,快速找到關鍵對話
- 全文搜尋關鍵字

#### 3. 事件重要性自動標記

使用 LLM 定期分析場景,標記重要事件:

**標記類別**:
- 🎭 **劇情轉折**: 改變角色關係或未來走向
- 💔 **情感高峰**: 強烈情緒表達
- 🔍 **秘密揭露**: 重要資訊首次被提及
- ⚔️ **衝突爆發**: 角色之間的對抗
- 🤝 **關係突破**: 和解、結盟、告白等

#### 4. LLM 驅動的時間軸助手

**玩家**: "幫我總結 Alice 這三天的主要活動"
**LLM**: 查詢資料庫 → 總結 → 回應

**玩家**: "Bob 為什麼生氣了?"
**LLM**: 追溯事件鏈 → 找到觸發點 → 解釋

#### 5. 多層次時間導航

```
[世界總覽] 24小時 → [角色視角] 看單一角色的一天 → [事件詳情] 具體對話內容
```

### 探索式敘事的優勢

1. **提高黏著度**: 主動探索比被動接收更有參與感
2. **個人化體驗**: 每個玩家關注不同角色,有不同發現
3. **重複探索價值**: 同一時間段可以從不同角度重新探索
4. **降低資訊負擔**: 不強迫玩家接收所有資訊

## 📊 記錄與回放系統

### 資料記錄需求

所有事件需完整記錄以支援回放:

#### 核心事件類型
- **對話**: 完整訊息內容、參與者、時間、地點
- **移動**: 角色位置變化
- **活動**: 角色執行的活動 (閱讀、園藝等)
- **關係變化**: 角色間好感度/敵意的變化
- **情緒狀態**: 角色當下的情緒
- **LLM 思考過程**: (可選) 記錄 LLM 的決策理由

#### 資料結構建議
```typescript
interface WorldEvent {
  id: string;
  timestamp: number;
  type: 'conversation' | 'movement' | 'activity' | 'relationship' | 'emotion';
  actors: string[];  // 涉及的角色
  location?: { x: number, y: number };
  data: any;  // 事件具體資料
  importance?: number;  // 自動評估的重要性
  tags?: string[];  // 自動或手動標籤
}
```

### 回放功能設計

#### 基礎回放
- **時間軸播放**: 選擇時間段,以正常速度或加速觀看
- **視角跟隨**: 鎖定特定角色視角
- **事件跳轉**: 快速跳到下一個重要事件

#### 進階分析
- **平行時間軸**: 同時顯示多個角色在同一時段的活動
- **關係網路圖**: 視覺化角色關係演變
- **情緒曲線圖**: 角色情緒的時序變化

## 🎯 成功指標

如何衡量這個連續劇系統是否成功?

### 內容品質指標
- ✅ **劇情連貫性**: 角色行為是否符合其設定與歷史
- ✅ **戲劇性**: 是否有足夠的衝突與情感變化
- ✅ **自然度**: 對話與行為是否自然,不過度腳本化
- ✅ **長期發展**: 角色關係是否有長期演變

### 技術穩定性指標
- ✅ **持續運行時間**: 系統可穩定運行的最長時間
- ✅ **LLM 呼叫成功率**: 非額度因素的失敗率
- ✅ **資料完整性**: 記錄無遺失,可完整回放
- ✅ **效能穩定性**: 長期運行不會明顯變慢

### 使用者體驗指標
- ✅ **觀看時長**: 使用者平均觀看時間
- ✅ **回訪率**: 使用者是否會回來繼續觀看
- ✅ **探索深度**: 使用者平均探索的歷史事件數量
- ✅ **角色關注度**: 使用者是否建立對特定角色的偏好

## 🚧 挑戰與風險

### 技術挑戰

1. **LLM 成本控制**
   - 長期運行的 API 呼叫成本
   - 需要智能的額度管理機制

2. **資料量增長**
   - 長期運行產生大量歷史資料
   - 需要高效的查詢與歸檔策略

3. **邏輯一致性**
   - AI 可能產生前後矛盾的行為
   - 需要記憶系統與一致性檢查

### 內容品質挑戰

1. **劇情平淡期**
   - 可能長時間沒有戲劇性事件
   - 需要環境刺激機制

2. **角色行為收斂**
   - AI 可能陷入重複模式
   - 需要定期注入新刺激

3. **關係僵化**
   - 角色關係可能固定,缺乏變化
   - 需要動態事件系統

### 使用者體驗挑戰

1. **新玩家進入門檻**
   - 中途進入如何快速理解現狀
   - 需要友善的導覽機制

2. **資訊過載**
   - 歷史資料太多,難以篩選
   - 需要智能推薦與摘要

3. **無聊時段處理**
   - 如果當下沒有有趣事件發生
   - 需要引導玩家探索歷史或觀看回放

## 🔮 未來展望

### 短期目標 (1-3 個月)
- [ ] 建立基礎持續運行框架
- [ ] 實現完整的事件記錄系統
- [ ] 開發基本的時間軸探索工具
- [ ] 驗證 AI 劇情湧現能力

### 中期目標 (3-6 個月)
- [ ] 實現進階探索功能 (關係圖、事件標記)
- [ ] 優化 LLM 成本與品質平衡
- [ ] 建立劇情品質自動評估系統
- [ ] 支援多世界平行運行

### 長期願景 (6+ 個月)
- [ ] 允許有限的觀察者互動
- [ ] 自動生成劇情摘要與亮點剪輯
- [ ] 社群功能:觀察者可討論劇情
- [ ] 跨世界角色交流實驗

## 📝 與其他文件的關聯

本文件描述整體系統理念,具體技術實作分散在其他文件:

- **活動選擇**: [`AI-Town_改進計劃_階段一_基礎優化_活動選擇.md`](AI-Town_改進計劃_階段一_基礎優化_活動選擇.md)
- **對話系統**: 待補充
- **記憶系統**: 待補充
- **關係系統**: 待補充
- **LLM 額度管理**: 參見活動選擇文件 Q9

---

**文件版本**: v1.0
**最後更新**: 2025-11-06
**狀態**: 初版,持續演進中
